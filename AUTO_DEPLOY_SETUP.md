# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–¢–µ–ø–µ—Ä—å Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è **runtime** –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Cloud Run, –∞ –Ω–µ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:

- ‚úÖ **–ù–µ –Ω—É–∂–Ω—ã build-time –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ Cloud Build
- ‚úÖ **–ù–µ –Ω—É–∂–Ω—ã substitutions** –≤ —Ç—Ä–∏–≥–≥–µ—Ä–µ
- ‚úÖ **–í—Å–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Cloud Run** —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏**

## üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Cloud Run

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Cloud Run —Å–µ—Ä–≤–∏—Å

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Cloud Console](https://console.cloud.google.com/run)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å `command-task-planner`
3. –ù–∞–∂–º–∏—Ç–µ **"Edit & Deploy New Revision"**

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í —Ä–∞–∑–¥–µ–ª–µ **"Variables & Secrets"** ‚Üí **"Variables"** –¥–æ–±–∞–≤—å—Ç–µ:

```
VITE_FIREBASE_API_KEY = AIzaSy–í–∞—à–ö–ª—é—á
VITE_FIREBASE_AUTH_DOMAIN = studio-2234511114-48ef4.firebaseapp.com
VITE_FIREBASE_PROJECT_ID = studio-2234511114-48ef4
VITE_FIREBASE_STORAGE_BUCKET = studio-2234511114-48ef4.firebasestorage.app
VITE_FIREBASE_MESSAGING_SENDER_ID = 677150406616
VITE_FIREBASE_APP_ID = 1:677150406616:web:79da619b454567e00c24ad
```

–¢–∞–∫–∂–µ –¥–æ–±–∞–≤—å—Ç–µ runtime –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã):

```
GOOGLE_API_KEY = –≤–∞—à_gemini_–∫–ª—é—á
TELEGRAM_BOT_TOKEN = –≤–∞—à_telegram_—Ç–æ–∫–µ–Ω
```

### –®–∞–≥ 3: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –∑–∞–¥–µ–ø–ª–æ–π—Ç–µ

–ù–∞–∂–º–∏—Ç–µ **"Deploy"**. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ –Ω–æ–≤–æ–º—É —Ä–µ–≤–∏–∑–∏–æ–Ω—É.

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞** - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑ build-time –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
2. **–î–µ–ø–ª–æ–π –≤ Cloud Run** - –æ–±—Ä–∞–∑ –¥–µ–ø–ª–æ–∏—Ç—Å—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞** - `server.js` —á–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `process.env`
4. **API endpoint** - `/api/config/firebase` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–ª–∏–µ–Ω—Ç—É
5. **–ö–ª–∏–µ–Ω—Ç** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Firebase

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ URL Cloud Run —Å–µ—Ä–≤–∏—Å–∞
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
   - `üîß Loading Firebase configuration from server (Cloud Run)...`
   - `‚úÖ Firebase configuration loaded from server`
   - `‚úÖ Firebase initialized successfully`

## üìù –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π Firebase

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Firebase Console](https://console.firebase.google.com/)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. ‚öôÔ∏è **Project Settings** ‚Üí **General**
4. –í —Ä–∞–∑–¥–µ–ª–µ **"Your apps"** –Ω–∞–π–¥–∏—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `firebaseConfig`

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
gcloud run services update command-task-planner \
  --region us-west1 \
  --update-env-vars "VITE_FIREBASE_API_KEY=–Ω–æ–≤—ã–π_–∫–ª—é—á,VITE_FIREBASE_AUTH_DOMAIN=–Ω–æ–≤—ã–π_–¥–æ–º–µ–Ω"
```

–ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å:
- Cloud Run ‚Üí Edit & Deploy New Revision ‚Üí Variables & Secrets

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã **–¥–æ** –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ `/api/config/firebase`
- –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∂–µ—Ç –æ—à–∏–±–∫—É –≤ –∫–æ–Ω—Å–æ–ª–∏
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env` —Ñ–∞–π–ª —Å `VITE_*` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ - –≤—Å–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (Cloud Run)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ–±—Ä–∞–∑
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å - –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —Ç—Ä–∏–≥–≥–µ—Ä–æ–º Cloud Build

