# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –í—ã–≤–æ–¥: –ü—Ä–æ–±–ª–µ–º–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Firebase, –Ω–µ –≤ –∫–æ–¥–µ

–ü–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞ –≤—ã—è–≤–ª–µ–Ω–æ, —á—Ç–æ **–∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ**. –ü—Ä–æ–±–ª–µ–º–∞ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Firebase.

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–¥–µ

### 1. SettingsView.tsx
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (`canManage`) —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ `actingMember` –¥–ª—è —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—ã–∑–æ–≤ `FirestoreService.removeMember` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### 2. FirestoreService.removeMember
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ —É–¥–∞–ª—è–µ–º–æ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ `actingUser` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—ã–∑–æ–≤ `deleteDoc` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
- ‚úÖ –û—à–∏–±–∫–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

---

## ‚ùå –ì–¥–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü—Ä–∞–≤–∏–ª–∞ Firestore –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã (–Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ)

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ "Missing or insufficient permissions"
- –ü—Ä–∞–≤–∏–ª–∞ –≤ —Ñ–∞–π–ª–µ `firestore.rules` –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –≤ Firebase Console

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Firebase Console ‚Üí Firestore ‚Üí Rules
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `firestore.rules` –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
3. –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–∞–≤–∏–ª
4. –ù–∞–∂–º–∏—Ç–µ "Publish"
5. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –î–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π

**–°–∏–º–ø—Ç–æ–º—ã:**
- –§—É–Ω–∫—Ü–∏—è `isSuperAdmin()` –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞
- `request.auth.token.email` —Ä–∞–≤–µ–Ω `null`

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Firebase Console ‚Üí Firestore ‚Üí `users`
2. –ù–∞–π–¥–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç —Å –≤–∞—à–∏–º `userId`
3. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ: `isSuperAdmin: true` (boolean)
4. –ò–õ–ò —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª–µ `email` —Å–æ–¥–µ—Ä–∂–∏—Ç `crazymhessel@gmail.com`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –¢–æ–∫–µ–Ω –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç email

**–°–∏–º–ø—Ç–æ–º—ã:**
- `request.auth.token.email` —Ä–∞–≤–µ–Ω `null` –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö Firestore
- –ù–æ —ç—Ç–æ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–æ–π —á–µ—Ä–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –µ—Å–ª–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å `isSuperAdmin: true` –∏–ª–∏ `email`

---

## üõ†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –®–∞–≥ 1: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∞–≤–∏–ª–∞ Firestore

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Firebase Console](https://console.firebase.google.com/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Firestore Database** ‚Üí **Rules**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–í–°–Å** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `firestore.rules` –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
4. –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–∞–≤–∏–ª
5. –ù–∞–∂–º–∏—Ç–µ **"Publish"**
6. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `isSuperAdmin` –≤ –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Firebase Console**
1. –í Firebase Console ‚Üí Firestore ‚Üí `users`
2. –ù–∞–π–¥–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç —Å –≤–∞—à–∏–º `userId`
3. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ: `isSuperAdmin: true` (boolean)
4. –ù–∞–∂–º–∏—Ç–µ "Update"

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞**
```javascript
import { db, auth } from './src/firebase';
import { doc, updateDoc } from 'firebase/firestore';

const user = auth.currentUser;
if (user) {
  const userRef = doc(db, 'users', user.uid);
  await updateDoc(userRef, { isSuperAdmin: true });
  console.log('‚úÖ –ì–æ—Ç–æ–≤–æ! –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
}
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –ª–æ–≥–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ `[SettingsView]` –∏ `[FirestoreService]`
   - –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –±—É–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç

- [ ] –ü—Ä–∞–≤–∏–ª–∞ Firestore —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã (Firebase Console ‚Üí Firestore ‚Üí Rules ‚Üí "Publish")
- [ ] –î–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–¥–µ—Ä–∂–∏—Ç `isSuperAdmin: true` –ò–õ–ò `email: "crazymhessel@gmail.com"`
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `CODE_ANALYSIS.md` - –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞
- `DEBUG_CHECKLIST.md` - –ø–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- `QUICK_FIX.md` - –±—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (3 —à–∞–≥–∞)
- `SETUP_SUPER_ADMIN.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞
- `DIAGNOSTIC_CHECK.md` - –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

---

## üéØ –ò—Ç–æ–≥

**–ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ.** –ü—Ä–æ–±–ª–µ–º–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Firebase:
1. –ü—Ä–∞–≤–∏–ª–∞ Firestore –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã
2. –î–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π

**–†–µ—à–µ–Ω–∏–µ:** –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `QUICK_FIX.md` –∏–ª–∏ `SETUP_SUPER_ADMIN.md`.

