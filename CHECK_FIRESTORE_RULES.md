# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª Firestore

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∞–≤–∏–ª

–ü—Ä–∞–≤–∏–ª–∞ –≤ —Ñ–∞–π–ª–µ `firestore.rules` –∞–∫—Ç—É–∞–ª—å–Ω—ã –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç:

1. **Collection Group Query –¥–ª—è members** (—Å—Ç—Ä–æ–∫–∏ 5-23)
   - –û—Ç–¥–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è collection group queries
   - `allow list: if request.auth != null;`

2. **–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è invites** (—Å—Ç—Ä–æ–∫–∏ 205-232)
   - `allow list: if request.auth != null && (isSuperAdmin() || isMember(workspaceId));`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: —Ç–µ–ø–µ—Ä—å –≤—Å–µ —á–ª–µ–Ω—ã workspace –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ invites

3. **–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è notifications** (—Å—Ç—Ä–æ–∫–∏ 257-277)
   - `allow list: if request.auth != null && isMember(workspaceId);`
   - `allow get: if request.auth != null && isMember(workspaceId);`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è list –∏ get

4. **–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è tasks** (—Å—Ç—Ä–æ–∫–∏ 283-314)
   - `allow list: if request.auth != null;`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

5. **–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è projects** (—Å—Ç—Ä–æ–∫–∏ 319-355)
   - `allow list: if request.auth != null;`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

6. **–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è members** (—Å—Ç—Ä–æ–∫–∏ 137-200)
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è update —É–ø—Ä–æ—â–µ–Ω–æ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

7. **–§—É–Ω–∫—Ü–∏—è isSuperAdmin()** (—Å—Ç—Ä–æ–∫–∏ 32-49)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ `crazymhessel@gmail.com` (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ–∫—É—â–µ–º—É —Å–ø–∏—Å–∫—É SUPER_ADMINS)

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ü—Ä–∞–≤–∏–ª–∞ –Ω—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤ Firebase Console!

–ü—Ä–∞–≤–∏–ª–∞ –≤ —Ñ–∞–π–ª–µ `firestore.rules` –∞–∫—Ç—É–∞–ª—å–Ω—ã, –Ω–æ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –≤ Firebase Console, —á—Ç–æ–±—ã –≤—Å—Ç—É–ø–∏—Ç—å –≤ —Å–∏–ª—É.

### –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∞–≤–∏–ª–∞:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Firebase Console:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://console.firebase.google.com/](https://console.firebase.google.com/)
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

2. **–û—Ç–∫—Ä–æ–π—Ç–µ Firestore Rules:**
   - –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Firestore Database**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Rules**

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `firestore.rules` –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–í–°–Å** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (Ctrl+A, Ctrl+C)

4. **–í—Å—Ç–∞–≤—å—Ç–µ –≤ Firebase Console:**
   - –í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤ Firebase Console (Ctrl+V)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

5. **–û–ø—É–±–ª–∏–∫—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Publish"** (–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å)
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—è–≤–∏–ª–æ—Å—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–í Firebase Console:**
   - –ü—Ä–∞–≤–∏–ª–∞ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç–º–µ—Ç–∫–∞ –æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

2. **–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**
   - –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ `permission-denied`

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∞–≤–∏–ª

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç:

- [x] Collection group query –¥–ª—è members (—Å—Ç—Ä–æ–∫–∏ 5-23)
- [x] –ü—Ä–∞–≤–∏–ª–æ `allow list` –¥–ª—è invites (—Å—Ç—Ä–æ–∫–∞ 208)
- [x] –ü—Ä–∞–≤–∏–ª–∞ `allow list` –∏ `allow get` –¥–ª—è notifications (—Å—Ç—Ä–æ–∫–∏ 260, 263)
- [x] –ü—Ä–∞–≤–∏–ª–æ `allow list` –¥–ª—è tasks (—Å—Ç—Ä–æ–∫–∞ 287)
- [x] –ü—Ä–∞–≤–∏–ª–æ `allow list` –¥–ª—è projects (—Å—Ç—Ä–æ–∫–∞ 323)
- [x] –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è `allow update` –≤ members (—Å—Ç—Ä–æ–∫–∏ 186-193)
- [x] –§—É–Ω–∫—Ü–∏—è `isSuperAdmin()` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π email (—Å—Ç—Ä–æ–∫–∏ 32-49)

---

## üéØ –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã –≤ Firebase Console
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:**
   - –í Firebase Console –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–Ω–æ–ø–∫–∞ "Publish" –∞–∫—Ç–∏–≤–Ω–∞
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

3. **–û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à:**
   - –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Ctrl+F5)
   - –í—ã–π–¥–∏—Ç–µ –∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∑–∞–Ω–æ–≤–æ

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ `permission-denied`
   - –°–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫–∞—è –∏–º–µ–Ω–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü—Ä–∞–≤–∏–ª–∞ –≤ —Ñ–∞–π–ª–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã. –ì–ª–∞–≤–Ω–æ–µ - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –≤ Firebase Console!

